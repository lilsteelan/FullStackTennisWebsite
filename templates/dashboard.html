<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Design by foolishdeveloper.com -->
    <title>Admin Login - Occonor</title>
 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='dashboard.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--Stylesheet-->
    <style media="screen">
    </style>

</head>
<body style="background-color: black;">
    <div class="background">
        <div class="shape"></div>
        <div class="shape"></div>
    </div>
    <form action="" style="height: 800px; width: 1500px;">
        <h4 style="color: white;">{{ date }}</h4>
        <h1 style="color: white;">Welcome Andrew</h1>
        <a href="{{ url_for('logout') }}">Logout</a>
        <div class="content">

            <div class="left">
                <h2 style="padding-top: 40px;">Statistics</h2>
                <div class="stats">
                    <h4>Payments Made Today: {{ paymentsToday }} </h4>
                    <h4>Profit Today:</h4>
                    <p>{{ people[0] }}</p>
                </div>
            </div>

            <div class="right">
                <div class="top">
                    <div class="form-group">
                        <label for="search-input">Search for People</label>
                        <form action="" method="get">
                            <input type="text" class="form-control" placeholder="Search"
                        style="width: 300px;" name="search-input" id="search-input">
                            <select name="money" id="money">
                                <option value="120">$120</option>
                                <option value="130">$130</option>
                                <option value="180">$180</option>
                                <option value="custom">Custom</option>
                                <option value="any">Any</option>
                            </select>
                            <select name="time" id="time">
                                <option value="today">Today</option>
                                <option value="pastweek">Past Week</option>
                                <option value="pastyear">Past Year</option>
                                <option value="all">All</option>
                            </select>
                            <button class="shadow__btn" type="submit">
                                Submit
                            </button>
                        </form>
                    </div>
                </div>

                <div class="results">
                    <table class="table">
                        <thead>
                          <tr>
                            <th scope="col">#</th>
                            <th scope="col">Parent</th>
                            <th scope="col">Child</th>
                            <th scope="col">Lesson</th>
                            <th scope="col">Amount</th>
                            <th scope="col">Payment Date</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% if people %}
                          <tr>
                            <th scope="row">1</th>
                            <td><div class="parent-item">{{ people[0].parentname }}</div></td>
                            <td>{{ people[0].childname }}</td>
                            <td>{{ people[0].registeredlesson }}</td>
                            <td>${{ people[0].amount }}</td>
                            <td>{{ people[0].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}

                          {% if people[1] %}
                          <tr>
                            <th scope="row">2</th>
                            <td><div class="parent-item">{{ people[1].parentname }}</div></td>
                            <td>{{ people[1].childname }}</td>
                            <td>{{ people[1].registeredlesson }}</td>
                            <td>${{ people[1].amount }}</td>
                            <td>{{ people[1].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}

                          {% if people[2] %}
                          <tr>
                            <th scope="row">3</th>
                            <td><div class="parent-item">{{ people[2].parentname }}</div></td>
                            <td>{{ people[2].childname }}</td>
                            <td>{{ people[2].registeredlesson }}</td>
                            <td>${{ people[2].amount }}</td>
                            <td>{{ people[2].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}

                          {% if people[3] %}
                          <tr>
                            <th scope="row">4</th>
                            <td><div class="parent-item">{{ people[3].parentname }}</div></td>
                            <td>{{ people[3].childname }}</td>
                            <td>{{ people[3].registeredlesson }}</td>
                            <td>${{ people[3].amount }}</td>
                            <td>{{ people[3].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}


                          {% if people[4] %}
                          <tr>
                            <th scope="row">5</th>
                            <td><div class="parent-item">{{ people[4].parentname }}</div></td>
                            <td>{{ people[4].childname }}</td>
                            <td>{{ people[4].registeredlesson }}</td>
                            <td>${{ people[4].amount }}</td>
                            <td>{{ people[4].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}

                          {% if people[5] %}
                          <tr>
                            <th scope="row">6</th>
                            <td><div class="parent-item">{{ people[5].parentname }}</div></td>
                            <td>{{ people[5].childname }}</td>
                            <td>{{ people[5].registeredlesson }}</td>
                            <td>${{ people[5].amount }}</td>
                            <td>{{ people[5].date }}</td>
                          </tr>
                          {% else %}

                          {% endif %}

                        </tbody>
                      </table>
                </div>
            </div>

        </div>
    </form>

    <script>
        document.querySelector('#search-input').addEventListener('input', filterList);
        

        function filterList(){
            console.log('test');
            const searchInput = document.querySelector('#search-input');
            console.log(searchInput.value);
            const filter = searchInput.value.toLowerCase();
            const listItems = document.querySelectorAll('parent-item');

            listItems.forEach((item) => {
                let text = item.textContent;
                if(text.toLowerCase().includes(filter.toLowerCase)){
                    item.style.display = '';
                }
                else{
                    item.style.display = 'none';
                }
            })
        }
    </script>
</body>
</html>
